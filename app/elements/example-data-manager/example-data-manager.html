<dom-module id="example-data-manager">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
  </template>
  <script>
    class ExampleDataManager extends Polymer.Element {
      static get is() {
        return "example-data-manager";
      }

      // Declare properties for the element's public API
      static get properties() {
        return {
          users: {
            type: Array,
            notify: true,
            value: function () {
              return {
                userId: 1,
                id: 1,
                title: "Payload enviado por el DM",
              };
            },
          },
          gifs: {
            type: Array,
            notify: true,
            value: function () {
              const APIKEY = "8HtcX4Qrusz1ZgYwdul8hnkxS73MqWc8";
              const URLAPIU = `https://api.giphy.com/v1/gifs/trending?api_key=${APIKEY}`;

              // Se supone que esto debe mostrarse bien pero
              // al momento de mostrar , genera un promise ?????
              try {
                const data = async () => {
                  const response = await fetch(URLAPIU);
                  const gifs = await response.json();
                  return gifs.data;
                };

                return data();
              } catch (error) {
                return [];
              }
            },
          },
        };
      }
    }

    customElements.define(ExampleDataManager.is, ExampleDataManager);
  </script>
</dom-module>
